<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTT - Trouble in Terrorist Town</title>
    <style>
        /* ===== Базовые стили ===== */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Trebuchet MS', Arial, sans-serif;
            background: #0a0a0a;
            background-image: 
                linear-gradient(45deg, #1a1a1a 25%, transparent 25%),
                linear-gradient(-45deg, #1a1a1a 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #1a1a1a 75%),
                linear-gradient(-45deg, transparent 75%, #1a1a1a 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            color: #ddd;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .ttt-header {
            text-align: center;
            padding: 30px 20px 10px;
            border-bottom: 2px solid #cc0000;
            box-shadow: 0 0 20px rgba(204, 0, 0, 0.3);
            background: rgba(0,0,0,0.7);
            margin-bottom: 20px;
        }

        .ttt-header h1 {
            font-size: 3.5em;
            margin: 0;
            color: #cc0000;
            text-shadow: 0 0 10px #ff0000, 0 0 20px #990000;
            letter-spacing: 2px;
            font-weight: bold;
            text-transform: uppercase;
            line-height: 1.2;
        }

        /* Стиль для пасхалки */
        #easterEgg {
            cursor: pointer;
            display: inline-block;
        }

        .ttt-header p {
            font-size: 1.2em;
            color: #ccc;
            margin: 5px 0 0;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .warning-message {
            font-size: 1.2em;
            color: #ffaaaa;
            background: rgba(0,0,0,0.6);
            padding: 12px 20px;
            border-radius: 8px;
            border: 2px solid #cc0000;
            margin: 20px auto 10px;
            max-width: 800px;
            width: 90%;
            text-shadow: 0 0 8px #ff0000;
            box-shadow: 0 0 15px rgba(204,0,0,0.5);
            font-weight: bold;
            letter-spacing: 1px;
        }

        /* ===== Кнопки главного меню ===== */
        .main-menu {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 40px 0 20px;
            flex-wrap: wrap;
        }

        .main-button {
            background: #2a2a2a;
            border: 3px solid #cc0000;
            color: #cc0000;
            font-size: 2.5em;
            font-weight: bold;
            text-transform: uppercase;
            padding: 20px 40px;
            cursor: pointer;
            box-shadow: 0 8px 0 #111, 0 0 20px rgba(204,0,0,0.3);
            border-radius: 10px;
            transition: all 0.2s ease;
            letter-spacing: 4px;
            min-width: 250px;
        }

        .main-button:hover {
            background: #cc0000;
            color: #111;
            transform: translateY(-3px);
            box-shadow: 0 11px 0 #8b0000, 0 0 30px #ff0000;
        }

        .main-button:active {
            transform: translateY(5px);
            box-shadow: 0 6px 0 #8b0000, 0 0 30px #ff0000;
        }

        /* ===== Модальные окна ===== */
        .modal {
            display: none;
            width: 500px;
            max-width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            background: rgba(20, 20, 20, 0.95);
            border: 2px solid #cc0000;
            border-radius: 10px;
            padding: 20px;
            margin: 20px auto;
            box-shadow: 0 0 30px rgba(0,0,0,0.9), 0 0 20px #cc0000 inset;
            position: relative;
            backdrop-filter: blur(2px);
        }

        .modal.active {
            display: block;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px dashed #cc0000;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .modal-header h3 {
            margin: 0;
            color: #cc0000;
            font-size: 1.8em;
            text-transform: uppercase;
            text-shadow: 0 0 10px #ff0000, 0 0 20px #990000;
        }

        .karma-header h3 {
            color: #ffaa00;
            text-shadow: 0 0 10px #ffaa00, 0 0 20px #b37400;
        }

        .close-btn {
            background: none;
            border: none;
            color: #cc0000;
            font-size: 2em;
            cursor: pointer;
            padding: 0;
            line-height: 1;
            transition: 0.2s;
        }

        .close-btn:hover {
            color: #ff6666;
            transform: scale(1.2);
        }

        /* ===== Сетка кнопок ролей ===== */
        .roles-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .role-button {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            padding: 12px 10px;
            background: #2a2a2a;
            border: 2px solid #555;
            font-size: 1.2em;
            font-weight: bold;
            text-transform: uppercase;
            cursor: pointer;
            border-radius: 5px;
            box-shadow: 0 4px 0 #111;
            transition: all 0.1s ease;
            text-align: left;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .role-icon {
            width: 32px;
            height: 32px;
            object-fit: contain;
            filter: drop-shadow(0 0 5px currentColor);
        }

        /* Цвета текста ролей */
        .role-detective { color: #0066ff; }
        .role-traitor { color: #cc0000; }
        .role-innocent { color: #00cc00; }
        .role-clown { color: #ff66cc; }
        .role-doctor { color: #00cc00; }
        .role-drunk { color: #8B4513; }
        .role-oldman { color: #8B4513; }
        .role-quack { color: #cc0000; }

        .role-button:hover {
            background: #cc0000;
            color: #111 !important;
            border-color: #ff6666;
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #8b0000;
        }

        .role-button:hover .role-icon {
            filter: brightness(0) invert(1);
        }

        .role-button:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #8b0000;
        }

        /* ===== Блок описания роли внутри модалки ===== */
        .role-description {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0,0,0,0.5);
            border-left: 3px solid #cc0000;
            border-radius: 5px;
            color: #cc0000;
            font-size: 1.1em;
            line-height: 1.5;
            white-space: pre-wrap;
            word-wrap: break-word;
            min-height: 4em;
            max-height: 200px;
            overflow-y: auto;
        }

        /* ===== Текст управления ===== */
        .controls-list p {
            color: #ddd;
            font-size: 1.1em;
            line-height: 1.6;
            margin: 10px 0;
        }

        .controls-list kbd {
            background: #333;
            border: 1px solid #cc0000;
            color: #ffaaaa;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: monospace;
            font-weight: bold;
            margin-right: 8px;
        }

        /* ===== Текст кармы ===== */
        .karma-text {
            color: #ddd;
            font-size: 1.1em;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        /* ===== Нижняя панель (дата) ===== */
        .info-text {
            text-align: center;
            color: #aaa;
            margin: 40px 0 10px;
            font-size: 1.1em;
            border-top: 1px solid #333;
            padding-top: 20px;
        }

        #date {
            color: #cc0000;
            font-weight: bold;
            text-shadow: 0 0 8px #ff0000;
        }

        .ttt-footer {
            text-align: center;
            padding: 15px;
            background: rgba(0,0,0,0.8);
            border-top: 2px solid #cc0000;
            color: #888;
            font-size: 0.9em;
            margin-top: auto;
            transition: color 0.3s;
        }

        /* ===== Стилизация скроллбара ===== */
        ::-webkit-scrollbar {
            width: 12px;
            height: 12px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
            border: 1px solid #cc0000;
        }

        ::-webkit-scrollbar-thumb {
            background: #cc0000;
            border-radius: 6px;
            border: 2px solid #1a1a1a;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #ff3333;
        }

        ::-webkit-scrollbar-corner {
            background: #1a1a1a;
        }

        /* Для Firefox */
        * {
            scrollbar-width: thin;
            scrollbar-color: #cc0000 #1a1a1a;
        }

        /* ===== Адаптация ===== */
        @media (max-width: 600px) {
            .ttt-header h1 {
                font-size: 2.2em;
            }
            .main-button {
                font-size: 1.8em;
                padding: 15px 20px;
                min-width: 200px;
            }
            .modal {
                width: 95%;
                padding: 15px;
            }
            .roles-grid {
                grid-template-columns: 1fr;
            }
            .role-button {
                font-size: 1.1em;
                padding: 12px;
                white-space: normal;
            }
            .role-icon {
                width: 28px;
                height: 28px;
            }
            .warning-message {
                font-size: 1em;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <header class="ttt-header">
        <!-- В слове TOWN первая буква T обёрнута в span для пасхалки -->
        <h1>TROUBLE IN TERRORIST <span id="easterEgg">T</span>OWN</h1>
        <p>role & controls guide</p>
        <div class="warning-message">
            ⚠️ ПРОШУ не закрывайте данное окно и прочитайте все 3 статьи для более приятной игры
        </div>
    </header>

    <!-- Три основные кнопки -->
    <div class="main-menu">
        <button class="main-button" id="showRoles">РОЛИ</button>
        <button class="main-button" id="showControls">УПРАВЛЕНИЕ</button>
        <button class="main-button" id="showKarma">КАРМА</button>
    </div>

    <!-- Мини-окошко для ролей -->
    <div id="rolesModal" class="modal">
        <div class="modal-header">
            <h3>Выберите роль</h3>
            <button class="close-btn" id="closeRoles">&times;</button>
        </div>
        <div class="roles-grid">
            <!-- Невиновные -->
            <button class="role-button role-innocent" id="roleInnocent">
                <img src="images/innocent.png" alt="Innocent" class="role-icon" onerror="this.style.display='none';"> Innocent
            </button>
            <button class="role-button role-doctor" id="roleDoctor">
                <img src="images/doctor.png" alt="Doctor" class="role-icon" onerror="this.style.display='none';"> Doctor
            </button>
            <!-- Детектив -->
            <button class="role-button role-detective" id="roleDetective">
                <img src="images/detective.png" alt="Detective" class="role-icon" onerror="this.style.display='none';"> Detective
            </button>
            <!-- Предатели -->
            <button class="role-button role-traitor" id="roleTraitor">
                <img src="images/traitor.png" alt="Traitor" class="role-icon" onerror="this.style.display='none';"> Traitor
            </button>
            <button class="role-button role-quack" id="roleQuack">
                <img src="images/quack.png" alt="Quack" class="role-icon" onerror="this.style.display='none';"> Quack
            </button>
            <!-- Одиночки -->
            <button class="role-button role-drunk" id="roleDrunk">
                <img src="images/drunk.png" alt="Drunk" class="role-icon" onerror="this.style.display='none';"> Drunk
            </button>
            <button class="role-button role-oldman" id="roleOldman">
                <img src="images/oldman.png" alt="Old Man" class="role-icon" onerror="this.style.display='none';"> Old Man
            </button>
            <button class="role-button role-clown" id="roleClown">
                <img src="images/clown.png" alt="Clown" class="role-icon" onerror="this.style.display='none';"> Clown
            </button>
        </div>
        <div id="roleDescription" class="role-description"></div>
    </div>

    <!-- Мини-окошко для управления -->
    <div id="controlsModal" class="modal">
        <div class="modal-header">
            <h3>Управление</h3>
            <button class="close-btn" id="closeControls">&times;</button>
        </div>
        <div class="controls-list">
            <p><kbd>Q</kbd> позволяет выбросить ваше оружие, чтобы подобрать другое.</p>
            <p><kbd>C</kbd> открывает меню снаряжения, если у вашей роли оно есть.</p>
            <p><kbd>B</kbd> — отправлять голосовые сообщения только предателям (Suit Zoom).</p>
            <p><kbd>F1</kbd> показывает это меню (Помощь и настройки).</p>
            <p><kbd>N</kbd> открывает меню радиокоманд.</p>
            <p><kbd>SHIFT</kbd> позволяет вам бежать, пока есть выносливость.</p>
        </div>
    </div>

    <!-- Мини-окошко для кармы -->
    <div id="karmaModal" class="modal">
        <div class="modal-header karma-header">
            <h3>Карма</h3>
            <button class="close-btn" id="closeKarma">&times;</button>
        </div>
        <div class="karma-text">
            Ваша Карма начинается с 1000 и уменьшается, если вы наносите урон игрокам своей команды. Урон уменьшается, если карма ниже.<br><br>
            Если в начале раунда у вас низкая карма, вы получаете штраф к урону от оружия в этом раунде.<br><br>
            Играя чистые раунды, в которых вы не вредите товарищам, вы восстанавливаете карму. Некоторые роли также получают карму за урон врагам.<br><br>
            Значение кармы, отображаемое в таблице счёта, обновляется только после окончания раунда. Во время раунда истинная карма игрока может быть ниже.
        </div>
    </div>

    <!-- Блок с датой -->
    <div class="info-text">
        Today is <span id="date"></span>
    </div>

    <!-- Подвал (здесь будет пасхалка) -->
    <footer class="ttt-footer">
        <p>© 2025 TTT Fan Guide. Not affiliated with Facepunch Studios.</p>
    </footer>

    <script>
        // Элементы DOM
        const rolesModal = document.getElementById('rolesModal');
        const controlsModal = document.getElementById('controlsModal');
        const karmaModal = document.getElementById('karmaModal');
        const showRolesBtn = document.getElementById('showRoles');
        const showControlsBtn = document.getElementById('showControls');
        const showKarmaBtn = document.getElementById('showKarma');
        const closeRoles = document.getElementById('closeRoles');
        const closeControls = document.getElementById('closeControls');
        const closeKarma = document.getElementById('closeKarma');
        const dateSpan = document.getElementById('date');
        const roleDescriptionDiv = document.getElementById('roleDescription');
        const footerText = document.querySelector('.ttt-footer p');

        // Дата
        const today = new Date();
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        dateSpan.textContent = today.toLocaleDateString('ru-RU', options);

        // Управление модальными окнами
        function hideAllModals() {
            rolesModal.classList.remove('active');
            controlsModal.classList.remove('active');
            karmaModal.classList.remove('active');
        }

        function showRolesModal() {
            hideAllModals();
            rolesModal.classList.add('active');
            roleDescriptionDiv.innerHTML = '';
        }

        function showControlsModal() {
            hideAllModals();
            controlsModal.classList.add('active');
        }

        function showKarmaModal() {
            hideAllModals();
            karmaModal.classList.add('active');
        }

        showRolesBtn.addEventListener('click', showRolesModal);
        showControlsBtn.addEventListener('click', showControlsModal);
        showKarmaBtn.addEventListener('click', showKarmaModal);

        closeRoles.addEventListener('click', () => rolesModal.classList.remove('active'));
        closeControls.addEventListener('click', () => controlsModal.classList.remove('active'));
        closeKarma.addEventListener('click', () => karmaModal.classList.remove('active'));

        window.addEventListener('click', (e) => {
            if (e.target === rolesModal) rolesModal.classList.remove('active');
            if (e.target === controlsModal) controlsModal.classList.remove('active');
            if (e.target === karmaModal) karmaModal.classList.remove('active');
        });

        // Печатающийся текст
        let typingTimer = null;

        function stopTyping() {
            if (typingTimer) {
                clearInterval(typingTimer);
                typingTimer = null;
            }
        }

        function typeRoleDescription(roleClass, title, body, speed = 25) {
            stopTyping();
            roleDescriptionDiv.innerHTML = `<span class="${roleClass}">${title}</span>: `;
            let i = 0;
            typingTimer = setInterval(() => {
                if (i < body.length) {
                    let char = body.charAt(i);
                    if (char === '\n') {
                        roleDescriptionDiv.innerHTML += '<br>';
                    } else {
                        roleDescriptionDiv.innerHTML += char;
                    }
                    i++;
                } else {
                    clearInterval(typingTimer);
                    typingTimer = null;
                }
            }, speed);
        }

        // Описания ролей
        const roleData = {
            detective: {
                title: 'Detective',
                body: 'член команды невиновных, чья задача — находить и уничтожать врагов.\n\nДругие игроки узнают, что ты Детектив, просто взглянув на тебя.'
            },
            traitor: {
                title: 'Traitor',
                body: 'член команды предателей, чья задача — убить всех врагов, как невиновных, так и одиночек.'
            },
            innocent: {
                title: 'Innocent',
                body: 'член команды невиновных, не имеющий особых способностей.'
            },
            clown: {
                title: 'Clown',
                body: 'это шут, цель которого — выжить достаточно долго, чтобы остались только он и одна команда.\n\nКогда команда должна была бы победить, Clown активируется, превращаясь в одиночку, и получает возможность устроить бойню и неожиданно победить.\n\nClown имеет доступ к магазину оружия, но только после активации.'
            },
            doctor: {
                title: 'Doctor',
                body: 'член команды невиновных, чья цель — лечить своих пациентов.\n\nИспользуйте магазин снаряжения, чтобы купить медпункт или лекарство от parasite, чтобы помогать проводить лечение.'
            },
            drunk: {
                title: 'Drunk',
                body: 'это одиночка, который не может точно вспомнить, к какой команде на самом деле принадлежит.\n\nЧерез некоторое время Drunk протрезвеет и вспомнит, какая у него роль.\n\nЕсли останется только одна команда, Drunk мгновенно протрезвеет и вспомнит, что он член проигравшей команды. Тогда его единственная цель — отомстить за своих павших товарищей.'
            },
            oldman: {
                title: 'Old Man',
                body: 'это одиночка, цель которого — просто выжить до пенсии.\n\nЕсли Old Man получает достаточно урона, чтобы умереть, у него случается прилив адреналина, и он сопротивляется смерти в течение 5 секунд. Когда адреналин заканчивается, он умирает. Этого времени достаточно, чтобы Old Man мог отомстить своему убийце.\n\nВо время прилива адреналина Old Man получает двуствольный дробовик с двумя патронами, чтобы не оставаться безоружным.'
            },
            quack: {
                title: 'Quack',
                body: 'член команды предателей, цель которой — подражать Doctor и "лечить" своих пациентов... до смерти.\n\nИспользуй магазин снаряжения, чтобы купить бомбу-станцию или фальшивое лекарство от parasite, чтобы помогать проводить "лечение".'
            }
        };

        // Обработчики кнопок ролей
        document.getElementById('roleInnocent').addEventListener('click', () => {
            typeRoleDescription('role-innocent', roleData.innocent.title, roleData.innocent.body, 25);
        });
        document.getElementById('roleDoctor').addEventListener('click', () => {
            typeRoleDescription('role-doctor', roleData.doctor.title, roleData.doctor.body, 25);
        });
        document.getElementById('roleDetective').addEventListener('click', () => {
            typeRoleDescription('role-detective', roleData.detective.title, roleData.detective.body, 25);
        });
        document.getElementById('roleTraitor').addEventListener('click', () => {
            typeRoleDescription('role-traitor', roleData.traitor.title, roleData.traitor.body, 25);
        });
        document.getElementById('roleQuack').addEventListener('click', () => {
            typeRoleDescription('role-quack', roleData.quack.title, roleData.quack.body, 25);
        });
        document.getElementById('roleDrunk').addEventListener('click', () => {
            typeRoleDescription('role-drunk', roleData.drunk.title, roleData.drunk.body, 25);
        });
        document.getElementById('roleOldman').addEventListener('click', () => {
            typeRoleDescription('role-oldman', roleData.oldman.title, roleData.oldman.body, 25);
        });
        document.getElementById('roleClown').addEventListener('click', () => {
            typeRoleDescription('role-clown', roleData.clown.title, roleData.clown.body, 25);
        });

        // ===== ПАСХАЛКА =====
        document.getElementById('easterEgg').addEventListener('click', function() {
            footerText.textContent = 'tttneverdieslamt';
        });
    </script>
</body>
</html>
